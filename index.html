<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>OpenVitals Monitor</title>
  <meta name="description" content="Camera-based vital sign monitor with an embeddable SDK for heart rate, stress and breathing estimation." />
  <link rel="manifest" href="manifest.webmanifest" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="site-header">
    <div class="site-brand">
      <span class="site-name">OpenVitals Monitor</span>
      <span class="site-tagline">Camera-based vital sign capture</span>
    </div>
    <nav class="site-nav">
      <a class="nav-link" href="#overview">Overview</a>
      <a class="nav-link" href="#sdk">SDK</a>
      <a class="nav-link" href="demo.html">Live demo</a>
      <button id="btnOpenDemo" class="primary">Launch live capture</button>
    </nav>
  </header>

  <main>
    <section id="overview" class="hero">
      <h1>Measure health signals with nothing but a camera</h1>
      <p class="lead">OpenVitals Monitor extracts pulse, variability and breathing trends directly from the forehead using remote photoplethysmography (rPPG). All processing runs on device &mdash; no branding, no data leaves the browser.</p>
      <div class="cta">
        <button id="btnOpenDemo2" class="primary xl">Start live scan</button>
        <a class="ghost xl" href="demo.html">Open full demo</a>
        <a class="ghost xl" href="#sdk">Read the SDK guide</a>
      </div>
      <ul class="highlight-grid">
        <li>Works on modern desktop and mobile browsers</li>
        <li>No wearables or external sensors required</li>
        <li>Includes a reusable JavaScript SDK</li>
        <li>Well suited for wellness, research and prototyping</li>
      </ul>
    </section>

    <section class="feature-grid">
      <article>
        <h3>Heart rate</h3>
        <p>Band-pass filtering isolates cardiac pulses from subtle color changes in the forehead region. Peak timing is used to derive beats per minute.</p>
      </article>
      <article>
        <h3>Stress index</h3>
        <p>We estimate a stress score from the short-term heart rate variability (RMSSD). Higher variability tends to correlate with lower stress.</p>
      </article>
      <article>
        <h3>Breathing trend</h3>
        <p>A low-pass channel tracks slower oscillations to approximate respiratory rate. This provides a calming-breathing guide without extra hardware.</p>
      </article>
      <article>
        <h3>Signal quality</h3>
        <p>Real-time quality indicators help you instruct users: sit still, face the camera and stay in good lighting to obtain stable signals.</p>
      </article>
    </section>

    <section class="how-it-works">
      <div>
        <h2>How it works</h2>
        <ol>
          <li>We crop a region of interest on the forehead and average its green channel intensity frame by frame.</li>
          <li>Digital filters separate cardiac and respiratory components, then peaks are detected to estimate timing.</li>
          <li>Metrics are derived from peak intervals and published through the SDK so you can build your own experience.</li>
        </ol>
      </div>
      <div class="callout">
        <strong>Privacy first.</strong> Everything runs locally inside the user browser. Streams never leave the device.
      </div>
    </section>

    <section id="sdk" class="sdk-section">
      <h2>SDK quick start</h2>
      <p>Import the <code>CameraVitalsSDK</code> module to embed live rPPG capture into any web application.</p>
<pre><code>import { CameraVitalsSDK } from './sdk.js';

const sdk = new CameraVitalsSDK({
  videoElement: document.querySelector('#video'),
  overlayCanvas: document.querySelector('#overlay')
});

const cameras = await sdk.listCameras({ requestAccess: true });
await sdk.start({ deviceId: cameras[0]?.deviceId });

sdk.addEventListener('metrics', (event) => {
  const { heartRate, stressScore, hrvMs, breathingRate } = event.detail;
  console.log('Live metrics', heartRate, stressScore, hrvMs, breathingRate);
});
</code></pre>
      <p>The SDK exposes helpers to list cameras, start/stop capture, and receive metric, status and error events. See the README for a full API reference.</p>
    </section>
  </main>

  <footer class="site-footer">
    <small>For wellness and research use only. This is not a medical device and it does not provide diagnoses.</small>
  </footer>

  <div id="demoModal" class="modal" aria-hidden="true">
    <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="demoTitle">
      <button id="btnCloseDemo" class="close" aria-label="Close">✕</button>
      <header class="modal-header">
        <h2 id="demoTitle">Live vitals capture</h2>
        <p>Keep still, face the camera and use even front lighting for 15&ndash;20 seconds while the signal stabilises.</p>
      </header>
      <div class="demo-layout">
        <div class="video-col">
          <div class="video-wrap">
            <video id="video" autoplay playsinline webkit-playsinline muted></video>
            <canvas id="overlay"></canvas>
            <div id="roi" class="roi">Align your forehead here</div>
          </div>
          <div class="controls">
            <div class="row">
              <label for="cameraSelect">Camera</label>
              <select id="cameraSelect"></select>
              <button id="btnStart" class="primary">Start</button>
              <button id="btnStop" class="ghost" disabled>Stop</button>
            </div>
            <div class="row note">
              <small>Supported in Chrome, Edge, Safari (HTTPS or localhost required).</small>
            </div>
          </div>
        </div>

        <div class="metrics-col">
          <div class="kpis">
            <div class="kpi">
              <div class="label">Heart rate</div>
              <div class="value"><span id="hrVal">–</span><span class="unit">bpm</span></div>
              <div class="pulse" id="pulseDot"></div>
            </div>
            <div class="kpi">
              <div class="label">Stress index</div>
              <div class="value"><span id="stressVal">–</span><span class="unit">/100</span></div>
              <div id="stressBadge" class="badge">—</div>
            </div>
            <div class="kpi">
              <div class="label">RMSSD</div>
              <div class="value"><span id="hrvVal">–</span><span class="unit">ms</span></div>
            </div>
            <div class="kpi">
              <div class="label">Respiration</div>
              <div class="value"><span id="rrVal">–</span><span class="unit">rpm</span></div>
            </div>
          </div>

          <div class="actions">
            <span id="status" class="muted"></span>
            <span id="quality" class="badge subtle">Signal quality: —</span>
          </div>

          <p class="demo-disclaimer">All processing happens locally. No video data is transmitted.</p>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="app.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js').catch(() => {});
      });
    }
  </script>
</body>
</html>
